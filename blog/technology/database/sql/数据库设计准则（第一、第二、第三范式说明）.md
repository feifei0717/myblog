# 数据库设计准则（第一、第二、第三范式说明）





### I、关系数据库设计范式介绍

#### 1.1 第一范式（1NF）无重复的列

​      所谓第一范式（1NF）是指数据库表的每一列都是不可分割的基本数据项，同一列中不能有多个值，即实体中的某个属性不能有多个值或者不能有重复的属性。如果出现重复的属性，就可能需要定义一个新的实体，新的实体由重复的属性构成，新实体与原实体之间为一对多关系。在第一范式（1NF）中表的每一行只包含一个实例的信息。简而言之，第一范式就是无重复的列。

说明：在任何一个关系数据库中，第一范式（1NF）是对关系模式的基本要求，不满足第一范式（1NF）的数据库就不是关系数据库。 

#### 1.2 第二范式（2NF）属性完全依赖于主键[消除部分子函数依赖]

​      第二范式（2NF）是在第一范式（1NF）的基础上建立起来的，即满足第二范式（2NF）必须先满足第一范式（1NF）。第二范式（2NF）要求数据库表中的每个实例或行必须可以被惟一地区分。为实现区分通常需要为表加上一个列，以存储各个实例的惟一标识。例如员工信息表中加上了员工编号（emp_id）列，因为每个员工的员工编号是惟一的，因此每个员工可以被惟一区分。这个惟一属性列被称为主关键字或主键、主码。 
​        第二范式（2NF）要求实体的属性完全依赖于主关键字。所谓完全依赖是指不能存在仅依赖主关键字一部分的属性，如果存在，那么这个属性和主关键字的这一部分应该分离出来形成一个新的实体，新实体与原实体之间是一对多的关系。为实现区分通常需要为表加上一个列，以存储各个实例的惟一标识。简而言之，第二范式就是属性完全依赖于主键。

#### 1.3 第三范式（3NF）属性不依赖于其它非主属性[消除传递依赖]

​            满足第三范式（3NF）必须先满足第二范式（2NF）。简而言之，第三范式（3NF）要求一个数据库表中不包含已在其它表中已包含的非主关键字信息。例如，存在一个部门信息表，其中每个部门有部门编号（dept_id）、部门名称、部门简介等信息。那么在的员工信息表中列出部门编号后就不能再将部门名称、部门简介等与部门有关的信息再加入员工信息表中。如果不存在部门信息表，则根据第三范式（3NF）也应该构建它，否则就会有大量的数据冗余。简而言之，第三范式就是属性不依赖于其它非主属性。 

### II、范式应用实例剖析

- 学生有那些基本信息
- 学生选了那些课，成绩是什么
- 每个课的学分是多少
- 学生属于那个系，系的基本信息是什么。

#### 2.1 第二范式（2NF）实例分析

​      首先我们考虑，把所有这些信息放到一个表中(学号，学生姓名、年龄、性别、课程、课程学分、系别、学科成绩，系办地址、系办电话)下面存在如下的依赖关系。 
​        （学号）→ (姓名, 年龄，性别，系别，系办地址、系办电话) 
​         (课程名称) → (学分) 
​        （学号，课程）→ (学科成绩)

​      因此不满足第二范式的要求，会产生如下问题 

​        数据冗余： 同一门课程由n个学生选修，"学分"就重复n-1次；同一个学生选修了m门课程，姓名和年龄就重复了m-1次。 
​        更新异常： 
​             1)若调整了某门课程的学分，数据表中所有行的"学分"值都要更新，否则会出现同一门课程学分不同的情况。 
​            2)假设要开设一门新的课程，暂时还没有人选修。这样，由于还没有"学号"关键字，课程名称和学分也无法记录入数据库。 
​       删除异常 ： 假设一批学生已经完成课程的选修，这些选修记录就应该从数据库表中删除。但是，与此同时，课程名称和学分信息也被删除了。很显然，这也会导致插入异常。

- 学生：Student(学号，姓名, 年龄，性别，系别，系办地址、系办电话)；
- 课程：Course(课程名称, 学分)；
- 选课关系：SelectCourse(学号, 课程名称, 成绩)。

#### 2.2 第三范式（3NF）实例分析

​        接着看上面的学生表Student(学号，姓名, 年龄，性别，系别，系办地址、系办电话)，关键字为单一关键字"学号"，因为存在如下决定关系： 
​       （学号）→ (姓名, 年龄，性别，系别，系办地址、系办电话) 
​        但是还存在下面的决定关系 
​       (学号) → (所在学院)→(学院地点, 学院电话) 
​        即存在非关键字段"学院地点"、"学院电话"对关键字段"学号"的传递函数依赖。 
​        它也会存在数据冗余、更新异常、插入异常和删除异常的情况。 (數據的更新，刪除異常這里就不分析了，可以參照2.1.1進行分析)
​        根据第三范式把学生关系表分为如下两个表就可以滿足第三范式了： 
​        学生：(学号, 姓名, 年龄, 性别，系别)； 
​        系别：(系别, 系办地址、系办电话)。 

#### 总结

​       上面的数据库表就是符合I,II,III范式的，消除了数据冗余、更新异常、插入异常和删除异常。 









原文地址: 

http://blog.chinaunix.net/uid-29632145-id-4257490.html

